<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gym Timer</title>
<style>
  body {
    font-family: sans-serif;
    margin: 0;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background: #ffffff;
  }

  .container {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 80%;
    max-width: 400px;
  }

  #time {
    font-size: 5em;
    font-weight: 400;
    margin-bottom: 20px;
    text-align: center;
  }

  #workBtn {
    width: 100%;
    font-size: 1.5em;
    padding: 12px;
    margin-bottom: 15px;
  }

  .button-row {
    display: flex;
    width: 100%;
    gap: 15px;
    margin-bottom: 15px;
  }

  button {
    flex: 1;
    font-size: 1.5em;
    padding: 12px 25px;
  }

  #info {
    display: flex;
    justify-content: space-between;
    width: 100%;
    font-size: 1em;
  }
</style>
</head>
<body>

<div class="container">

  <div id="time">00:00:00</div>

  <button id="workBtn">Working</button>

  <div class="button-row">
    <button id="startPauseBtn">▶</button>
    <button id="resetBtn">⏹</button>
  </div>

  <div id="info">
    <div id="totalTime">Total: 00:00:00</div>
    <div id="laps">Laps: 0</div>
  </div>

</div>

<script>
let startTime = 0;
let elapsedBeforePause = 0;
let totalStartTime = 0;
let totalElapsed = 0;
let timer;
let isPaused = true;
let isWorking = true;
let laps = 0;

function formatTime(ms) {
  let minutes = Math.floor(ms / 60000);
  let seconds = Math.floor((ms % 60000) / 1000);
  let milliseconds = Math.floor((ms % 1000) / 10);
  return `${minutes.toString().padStart(2,'0')}:` +
         `${seconds.toString().padStart(2,'0')}:` +
         `${milliseconds.toString().padStart(2,'0')}`;
}

function updateTime() {

  if (!isPaused) {
    let elapsed = Date.now() - startTime + elapsedBeforePause;
    document.getElementById('time').textContent = formatTime(elapsed);
  }

  if (totalStartTime !== 0) {
    totalElapsed = Date.now() - totalStartTime;
    document.getElementById('totalTime').textContent =
      "Total: " + formatTime(totalElapsed);
  }

  document.getElementById('laps').textContent = "Laps: " + laps;
}

function startStopwatch() {
  clearInterval(timer);
  timer = setInterval(updateTime, 10);
}

// Start / Pause
document.getElementById('startPauseBtn').addEventListener('click', () => {

  if (isPaused) {

    if (totalStartTime === 0) {
      totalStartTime = Date.now();
    }

    startTime = Date.now();
    isPaused = false;

    document.getElementById('startPauseBtn').textContent = "⏸";

    startStopwatch();

  } else {

    clearInterval(timer);

    elapsedBeforePause += Date.now() - startTime;

    isPaused = true;

    document.getElementById('startPauseBtn').textContent = "▶";

  }

});

// Working / Resting
document.getElementById('workBtn').addEventListener('click', () => {

  if (totalStartTime === 0) {
    totalStartTime = Date.now();
  }

  isWorking = !isWorking;

  document.getElementById('workBtn').textContent =
    isWorking ? "Working" : "Resting";

  startTime = Date.now();
  elapsedBeforePause = 0;
  isPaused = false;

  document.getElementById('startPauseBtn').textContent = "⏸";

  laps++;

  startStopwatch();

});

// Reset
document.getElementById('resetBtn').addEventListener('click', () => {

  clearInterval(timer);

  startTime = 0;
  elapsedBeforePause = 0;
  totalStartTime = 0;
  totalElapsed = 0;
  laps = 0;

  isPaused = true;
  isWorking = true;

  document.getElementById('time').textContent = "00:00:00";
  document.getElementById('totalTime').textContent = "Total: 00:00:00";
  document.getElementById('laps').textContent = "Laps: 0";

  document.getElementById('workBtn').textContent = "Working";
  document.getElementById('startPauseBtn').textContent = "▶";

});

updateTime();
</script>

</body>
</html>
